<!DOCTYPE html>
<html>
<head>
    <title>E-commerce Catalog</title>
</head>
<body>
    <h1>E-commerce Catalog</h1>

    <h2>Add Product</h2>
    <form method="POST" action="/products">
        <input name="name" placeholder="Name" required>
        <input name="price" placeholder="Price" type="number" required>
        <input name="category" placeholder="Category" required>
        <input name="variants" placeholder='Variants JSON e.g. [{"color":"Red","size":"M","stock":10}]' required>
        <button type="submit">Add Product</button>
    </form>

    <h2>Products List</h2>
    <ul id="products"></ul>

    <script>
        async function loadProducts() {
            const res = await fetch('/products');
            const products = await res.json();
            const ul = document.getElementById('products');
            ul.innerHTML = '';
            products.forEach(p => {
                const li = document.createElement('li');
                li.innerHTML = `<strong>${p.name}</strong> | ${p.price} | ${p.category} 
                <ul>
                    ${p.variants.map(v => `<li>${v.color} | ${v.size} | Stock: ${v.stock}</li>`).join('')}
                </ul>`;
                ul.appendChild(li);
            });
        }
        loadProducts();
    </script>
</body>
</html>
